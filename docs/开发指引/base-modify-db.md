基础 - 修改数据库结构
===

- 文档编写：KK

- 2016.11.08

---

数据库的创建是使用Yii的Migration（迁移）实现的

迁移脚本放在server/console/migration里，要执行迁移请在console目录里运行`_tools.bat`，选项1是`migrate/down all`，选项2和3都是`migrate/up`，不过2会附加模拟数据

---

### 创建表要注意

细心的你看看迁移的safeUp方法就会发现，init这个迁移调用了这个类的所有命名结尾为`_create`的方法，而这些方法就是各个表的创建代码

以后大家创建表应该按照相同的命名规则去增加建表脚本，不需要创建新的迁移来专门搞新表，除非发布后有版本更新吧

---

### 创建模拟数据

经我改造后的Migration拥有模拟数据的控制功能，例如通过`_worker_create`方法创建数据表的结构后，还需要默认有几个工作人员做测试的话，则是通过`_worker_mock`方法来创建模拟数据

定义了mock方法模拟表数据后，在`_tools.bat`中使用选项2来构造数据库就会有这些模拟数据